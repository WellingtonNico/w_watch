<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<script src="w_watch.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Bootstrap demo</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	      rel="stylesheet"
	      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
	      crossorigin="anonymous">
</head>
<body>

<div class="row justify-content-center pt-5">
	<div class="col col-6 text-center">
		<h1>W-Watch</h1>

		<br>
		<br>
		<br>

		<div class="d-flex flex-column">
			<small class="my-3">Exemplo de atualização de componente diretamente no html</small>
			<input id="id_input_range"
			       type="range"
			       value="50"
			       min="0"
			       max="100"
			       step="0.5">
			<div class="position-relative bg-success overflow-visible mt-1">
				<span class="d-flex rounded px-2 position-absolute"
				      style="background-color: red;left:calc(50%);transform:translateX(-50%)">
					<output w-watch="#id_input_range:input"
					        w-effect-0="
					          this.value=Number(this.alvo.value).toFixed(1)
					          this.parentNode.style.left=`calc(${this.alvo.value}%)`
					          let bgColor,color
					          if(this.alvo.value>80){
					            bgColor = 'red'
					            color='white'
					          }else if(this.alvo.value>50){
					            bgColor = 'yellow'
					            color = 'black'
					          }else{
					            bgColor = 'green'
					            color = 'white'
					          }
					          this.parentNode.style.backgroundColor = bgColor
					          this.parentNode.style.color = color
									">
						50.0
					</output>
					%
				</span>
			</div>
		</div>

		<br>
		<br>
		<br>

		<div>
			<small>Ocultar e exibir componentes</small>
			<div class="d-flex justify-content-between">

				<!-- radio 1 -->
				<div class="form-check form-switch">
					<input name="name_teste" class="form-check-input" type="radio" role="switch" id="id_switch_1">
					<label class="form-check-label" for="id_switch_1">Exibe componente 1</label>
				</div>

				<!-- radio 2 -->
				<div class="form-check form-switch">
					<input name="name_teste" class="form-check-input" type="radio" role="switch" id="id_switch_2" checked>
					<label class="form-check-label" for="id_switch_2">Exibe componente 2</label>
				</div>
			</div>

			<!-- componente 1 -->
			<div id="componente_1"
			     class="bg-success"
			     w-watch="#id_switch_1:change"
			     w-effect-0="componente_2.style.display='none';this.style.display='block'"
			><h1>Componente 1</h1></div>

			<!-- componente 2 -->
			<div id="componente_2"
			     class="bg-primary"
			     w-watch="#id_switch_2:change"
			     w-effect-0="componente_1.style.display='none';this.style.display='block'"
			><h1>Componente 2</h1></div>
		</div>

		<br>
		<br>
		<br>

		<small>Contagem de elementos</small>

		<h6>
			<output w-watch="#id_tbody:childList"
			        w-effect-0="this.value = this.alvo.children.length"></output>
			linhas exibidas
		</h6>

		<div class="table-responsive">
			<table class="table table-striped">
				<thead>
				<tr>
					<th>id</th>
					<th>nome</th>
					<th class="text-end">ação</th>
				</tr>
				</thead>
				<tbody id="id_tbody">
				<tr>
					<td>1</td>
					<td>teste</td>
					<td class="text-end">
						<button onclick="this.closest('tr').remove()" class="btn btn-danger">remover</button>
					</td>
				</tr>
				<tr>
					<td>1</td>
					<td>teste</td>
					<td class="text-end">
						<button onclick="this.closest('tr').remove()" class="btn btn-danger">remover</button>
					</td>
				</tr>
				<tr>
					<td>1</td>
					<td>teste</td>
					<td class="text-end">
						<button onclick="this.closest('tr').remove()" class="btn btn-danger">remover</button>
					</td>
				</tr>
				<tr>
					<td>1</td>
					<td>teste</td>
					<td class="text-end">
						<button onclick="this.closest('tr').remove()" class="btn btn-danger">remover</button>
					</td>
				</tr>
				<tr>
					<td>1</td>
					<td>teste</td>
					<td class="text-end">
						<button onclick="this.closest('tr').remove()" class="btn btn-danger">remover</button>
					</td>
				</tr>
				</tbody>

			</table>
		</div>
	</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<script>
  let wWatch = new WWatch()
  wWatch.inicializar()
</script>
</body>
</html>
